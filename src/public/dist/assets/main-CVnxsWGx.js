import{c as i,a as e,b as y,t as u,F as h,r as f,w as m,v,d as G,e as g,f as E,o as r,n as T,p as O,g as j,h as w,i as R,j as $,k as _,l as b,V as D,m as P,q as L,s as I,u as U,x as z,y as F,z as B,A as H,B as Y,C as q,D as Q,_ as J,E as N,G as X,H as W,I as Z,J as K,K as ee,L as te,M as oe,N as se,O as le}from"./vendor-DPaeBaJy.js";const S=(t,o)=>{const n=t.__vccOpts||t;for(const[d,l]of o)n[d]=l;return n},ne={props:{calendars:{type:Array}},data(){return{yearSelected:new Date().getFullYear(),selectedPeriod:null}},created(){console.log(this.calendars)},computed:{yearSelectedLibelle(){return this.getCurrentYearLibelle()},currentPeriods(){return this.currentCalendar.periods},currentCalendar(){let t=this.calendars.find(o=>o.year===this.yearSelected);return t||(t={id:null,periods:[],year:this.yearSelected}),t}},methods:{getCurrentYearLibelle(){let t=this.yearSelected;return t+"/"+(t+1)},changeYear(t){let o=this.yearSelected;t==="previous"?o--:o++,this.yearSelected=o},selectPeriod(t){this.selectedPeriod=t},formatDate(t){return new Date(t).toLocaleDateString("fr-FR")}}},ae={class:"container mt-4"},ie=e("h2",null,"Calendrier - Ouverture des inscriptions",-1),re={class:"row mt-2"},de={class:"col"},ce=e("i",{class:"fa-solid fa-arrow-left"},null,-1),ue=[ce],me=e("i",{class:"fa-solid fa-arrow-right"},null,-1),pe=[me],he=e("div",{class:"row"},[e("div",{class:"col"},[e("button",{class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#modalNewPeriod"},"Nouvelle période")])],-1),_e={class:"row mt-2"},fe={class:"col"},be={class:"table table-bordered tablePeriods"},ve=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"Date de début"),e("th",{scope:"col"},"Date de fin"),e("th",{scope:"col"},"Libelle"),e("th",{scope:"col"},"Inscription ouverte"),e("th",{scope:"col"})])],-1),ge=["onClick"],Ce=e("i",{class:"fa-2x fa-solid fa-pen-to-square"},null,-1),ye=[Ce],Se=["onClick"],xe=e("i",{class:"fa-2x fa-solid fa-trash-can red"},null,-1),we=[xe],ke={class:"modal fade",id:"modalUpdatePeriod",tabindex:"-1","aria-labelledby":"modalUpdatePeriod","aria-hidden":"true"},$e={class:"modal-dialog"},Ge={class:"modal-content"},Ve=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"exampleModalLabel"},"Modifier la période"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Ae={class:"modal-body"},Te={class:"row"},De={key:0,class:"col"},Pe={method:"POST",action:"calendarUpdate"},Le={class:"form-control"},Ie=e("label",{for:"startDateUpdate",class:"form-label"},"Date de début",-1),Ue={class:"form-control"},Ne=e("label",{for:"endDateUpdate",class:"form-label"},"Date de fin",-1),Me={class:"form-control"},Ee=e("label",{for:"libelle",class:"form-label"},"Libelle",-1),Oe={class:"form-check"},je=e("label",{class:"form-check-label",for:"disabledInscription"}," Inscription ouverte ",-1),Re={class:"form-control"},ze=["value"],Fe=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),Be=e("button",{type:"submit",class:"m-1 btn btn-primary"},"Modifier",-1),He=e("div",{class:"modal-footer"},null,-1),Ye={class:"modal fade",id:"modalNewPeriod",tabindex:"-1","aria-labelledby":"modalNewPeriod","aria-hidden":"true"},qe={class:"modal-dialog"},Qe={class:"modal-content"},Je=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"modalNewPeriodLabel"},"Nouvelle période"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Xe={class:"modal-body"},We={class:"row"},Ze={class:"col"},Ke={method:"POST",action:"calendarNew"},et=E('<div class="form-control"><label for="startDateNew" class="form-label">Date de début</label><input class="form-control form-control-lg" name="startDateNew" id="startDateNew" type="date"></div><div class="form-control"><label for="endDateNew" class="form-label">Date de fin</label><input class="form-control form-control-lg" name="endDateNew" id="endDateNew" type="date"></div><div class="form-control"><label for="label" class="form-label">Libelle</label><input class="form-control form-control-lg" name="libelle" id="libelle" type="text"></div><div class="form-check"><input class="form-check-input" type="checkbox" name="disabledInscription" id="disabledInscription" checked><label class="form-check-label" for="disabledInscription"> Inscription ouverte </label></div>',4),tt={key:0,class:"form-control"},ot=["value"],st=["value"],lt=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),nt=e("button",{type:"submit",class:"m-1 btn btn-primary"},"Ajouter",-1),at=e("div",{class:"modal-footer"},null,-1),it={class:"modal fade",id:"modalDeletePeriod",tabindex:"-1","aria-labelledby":"modalDeletePeriod","aria-hidden":"true"},rt={class:"modal-dialog"},dt={class:"modal-content"},ct=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"exampleModalLabel"},"Supprimer la période d'ouverture"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ut={key:0,class:"modal-body"},mt=e("div",{class:"row"},[e("div",{class:"col"}," Voulez-vous vraiment supprimer la période ? ")],-1),pt={class:"row"},ht={method:"POST",action:"calendarDelete"},_t={class:"form-control"},ft=["value"],bt=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),vt=e("button",{type:"submit",class:"m-1 btn btn-danger"},"Supprimer",-1),gt=e("div",{class:"modal-footer"},null,-1);function Ct(t,o,n,d,l,a){return r(),i("div",ae,[ie,e("div",re,[e("div",de,[e("h3",null,[y("Année "),e("span",{class:"pointer",onClick:o[0]||(o[0]=s=>a.changeYear("previous"))},ue),y(" "+u(a.yearSelectedLibelle)+" ",1),e("span",{class:"pointer",onClick:o[1]||(o[1]=s=>a.changeYear("next"))},pe)])])]),he,e("div",_e,[e("div",fe,[e("table",be,[ve,e("tbody",null,[(r(!0),i(h,null,f(a.currentPeriods,s=>(r(),i("tr",{key:s.id},[e("td",null,u(a.formatDate(s.startDate)),1),e("td",null,u(a.formatDate(s.endDate)),1),e("td",null,u(s.libelle),1),e("td",null,u(s.disabledInscription?"Oui":"Non"),1),e("td",null,[e("span",{onClick:c=>a.selectPeriod(s),class:"pointer","data-bs-toggle":"modal","data-bs-target":"#modalUpdatePeriod"},ye,8,ge),e("span",{onClick:c=>a.selectPeriod(s),class:"pointer","data-bs-toggle":"modal","data-bs-target":"#modalDeletePeriod"},we,8,Se)])]))),128))])])])]),e("div",ke,[e("div",$e,[e("div",Ge,[Ve,e("div",Ae,[e("div",Te,[l.selectedPeriod?(r(),i("div",De,[e("form",Pe,[e("div",Le,[Ie,m(e("input",{"onUpdate:modelValue":o[2]||(o[2]=s=>l.selectedPeriod.startDate=s),class:"form-control form-control-lg",name:"startDateUpdate",id:"startDateUpdate",type:"date"},null,512),[[v,l.selectedPeriod.startDate]])]),e("div",Ue,[Ne,m(e("input",{"onUpdate:modelValue":o[3]||(o[3]=s=>l.selectedPeriod.endDate=s),class:"form-control form-control-lg",name:"endDateUpdate",id:"endDateUpdate",type:"date"},null,512),[[v,l.selectedPeriod.endDate]])]),e("div",Me,[Ee,m(e("input",{"onUpdate:modelValue":o[4]||(o[4]=s=>l.selectedPeriod.libelle=s),class:"form-control form-control-lg",name:"libelle",id:"libelle",type:"text"},null,512),[[v,l.selectedPeriod.libelle]])]),e("div",Oe,[m(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[5]||(o[5]=s=>l.selectedPeriod.disabledInscription=s),name:"disabledInscription",id:"disabledInscription",checked:""},null,512),[[G,l.selectedPeriod.disabledInscription]]),je]),e("div",Re,[e("input",{type:"hidden",name:"periodId",value:l.selectedPeriod.id},null,8,ze),Fe,Be])])])):g("",!0)])]),He])])]),e("div",Ye,[e("div",qe,[e("div",Qe,[Je,e("div",Xe,[e("div",We,[e("div",Ze,[e("form",Ke,[et,a.currentCalendar?(r(),i("div",tt,[e("input",{type:"hidden",name:"calendarId",value:a.currentCalendar.id},null,8,ot),e("input",{type:"hidden",name:"calendarYear",value:a.currentCalendar.year},null,8,st),lt,nt])):g("",!0)])])])]),at])])]),e("div",it,[e("div",rt,[e("div",dt,[ct,l.selectedPeriod?(r(),i("div",ut,[mt,e("div",pt,[e("form",ht,[e("div",_t,[e("input",{type:"hidden",name:"periodId",value:l.selectedPeriod.id},null,8,ft),bt,vt])])])])):g("",!0),gt])])])])}const yt=S(ne,[["render",Ct]]),St=Object.freeze(Object.defineProperty({__proto__:null,default:yt},Symbol.toStringTag,{value:"Module"})),xt={props:{},data(){return{composantesDefault:[],composanteGroupesDefault:[],gestionnaires:[],gestionnaireSelected:{composanteGroupes:[]},composanteGroupeSelected:{composantes:[]},nameGroupToAdd:"",searchCgNonA:"",searchCgA:""}},created(){this.getComposanteGroupe()},computed:{cgToAdd(){return this.gestionnaireSelected?(console.log(this.composanteGroupesDefault),this.composanteGroupesDefault.filter(t=>!this.gestionnaireSelected.composanteGroupes.some(o=>o.id===t.id))):[]},cToAdd(){return this.composanteGroupeSelected.id?this.composantesDefault.filter(t=>!this.composanteGroupeSelected.composantes.some(o=>o.id===t.id)&&t.libelle.toLowerCase().includes(this.searchCgNonA.toLowerCase())):[]},cgSelectedComposantes(){return this.composanteGroupeSelected.composantes.filter(t=>t.libelle.toLowerCase().includes(this.searchCgA.toLowerCase()))}},methods:{selectGestionnaire(t){this.gestionnaireSelected=t},selectComposanteGroupe(t){this.composanteGroupeSelected=t},addComposante(t){this.composanteGroupeSelected.composantes.push(t),unicaenVue.axios.post(unicaenVue.url("configuration/addComposanteToGroup"),{composanteGroup:this.composanteGroupeSelected,composante:t}).then(o=>{this.getComposanteGroupe()})},removeComposante(t){const o=this.composanteGroupeSelected.composantes.findIndex(n=>n.id===t.id);o!==-1&&this.composanteGroupeSelected.composantes.splice(o,1),unicaenVue.axios.post(unicaenVue.url("configuration/removeComposanteToGroup"),{composanteGroup:this.composanteGroupeSelected,composante:t}).then(n=>{this.getComposanteGroupe()})},addComposanteGroupe(t){this.gestionnaireSelected.composanteGroupes.push(t),unicaenVue.axios.post(unicaenVue.url("configuration/addAttribution"),{user:this.gestionnaireSelected,cg:t}).then(o=>{if(!o.data.error)this.getComposanteGroupe();else throw o.data})},removeComposanteGroupe(t){const o=this.gestionnaireSelected.composanteGroupes.findIndex(n=>n.id===t.id);o!==-1&&this.gestionnaireSelected.composanteGroupes.splice(o,1),unicaenVue.axios.post(unicaenVue.url("configuration/removeAttribution"),{user:this.gestionnaireSelected,cg:t}).then(n=>{if(!n.data.error)this.getComposanteGroupe();else throw n.data})},getComposanteGroupe(){unicaenVue.axios.get(unicaenVue.url("configuration/getDataComposanteGroup")).then(t=>{if(t.data.error)throw t.data;{let o=t.data;console.log(o),this.gestionnaires=o.gestionnaires,this.composanteGroupesDefault=Array.isArray(o.composanteGroupesDefault)?o.composanteGroupesDefault:Object.values(o.composanteGroupesDefault),this.composantesDefault=Array.isArray(o.composantesDefault)?o.composantesDefault:Object.values(o.composantesDefault)}})},postAttribution(t,o){},addGroup(){this.nameGroupToAdd&&unicaenVue.axios.post(unicaenVue.url("configuration/addGroup"),{name:this.nameGroupToAdd}).then(t=>{this.getComposanteGroupe()})},deleteGroup(t){t&&unicaenVue.axios.delete(unicaenVue.url(`configuration/deleteGroup/${t.id}`)).then(o=>{this.getComposanteGroupe()})}}},p=t=>(O("data-v-64522761"),t=t(),j(),t),wt=p(()=>e("h2",null,"Gestion gestionnaires/composantes",-1)),kt=p(()=>e("nav",{class:"mt-4"},[e("div",{id:"nav-tab",class:"nav nav-tabs",role:"tablist"},[e("button",{class:"nav-link active","data-bs-toggle":"tab",href:"#gestionnaires"},"Gestionnaires"),e("button",{class:"nav-link","data-bs-toggle":"tab",href:"#composantes"},"Composantes")])],-1)),$t={class:"tab-content"},Gt={class:"tab-pane fade show active",id:"gestionnaires"},Vt=p(()=>e("h2",null,"Attribution des gestionnaires",-1)),At={class:"row"},Tt={class:"col-3"},Dt={class:"table table-hover"},Pt=p(()=>e("th",null,"Nom",-1)),Lt=["onClick"],It={class:"col-3"},Ut={class:"table table-hover"},Nt=p(()=>e("th",null,"Attribué",-1)),Mt=["onClick"],Et=p(()=>e("i",{class:"icon fa fa-minus","aria-hidden":"true"},null,-1)),Ot={class:"col-3"},jt={class:"table table-hover"},Rt=p(()=>e("th",null,"Non Attribué",-1)),zt=["onClick"],Ft=p(()=>e("i",{class:"icon fa fa-plus","aria-hidden":"true"},null,-1)),Bt={class:"tab-pane fade",id:"composantes"},Ht=p(()=>e("h2",null,"Liste des Groupes de Composantes",-1)),Yt={class:"row"},qt={class:"col-3"},Qt={class:"col-1"},Jt={class:"col-4"},Xt={class:"col-4"},Wt={class:"row"},Zt={class:"col-4"},Kt={class:"table table-hover"},eo=p(()=>e("th",null,"Nom",-1)),to=p(()=>e("th",null,null,-1)),oo=["onClick"],so=["onClick"],lo=p(()=>e("i",{class:"icon fa fa-trash",style:{color:"red!important"},"aria-hidden":"true"},null,-1)),no=[lo],ao={class:"col-4"},io={class:"table table-hover"},ro=p(()=>e("th",null,"Attribué",-1)),co=["onClick"],uo=p(()=>e("i",{class:"icon fa fa-minus","aria-hidden":"true"},null,-1)),mo={class:"col-4"},po={class:"table table-hover"},ho=p(()=>e("th",null,"Non Attribué",-1)),_o=["onClick"],fo=p(()=>e("i",{class:"icon fa fa-plus","aria-hidden":"true"},null,-1));function bo(t,o,n,d,l,a){return r(),i("div",null,[wt,kt,e("div",$t,[e("div",Gt,[Vt,e("div",At,[e("div",Tt,[e("table",Dt,[Pt,e("tbody",null,[(r(!0),i(h,null,f(l.gestionnaires,s=>(r(),i("tr",{class:T({active:l.gestionnaireSelected&&s.id===l.gestionnaireSelected.id}),key:s.id,onClick:c=>a.selectGestionnaire(s)},[e("td",null,u(s.displayName),1)],10,Lt))),128))])])]),e("div",It,[e("table",Ut,[Nt,e("tbody",null,[l.gestionnaireSelected.id?(r(!0),i(h,{key:0},f(l.gestionnaireSelected.composanteGroupes,s=>(r(),i("tr",{key:s.id,onClick:c=>a.removeComposanteGroupe(s)},[e("td",null,[y(u(s.libelle)+" ",1),Et])],8,Mt))),128)):g("",!0)])])]),e("div",Ot,[e("table",jt,[Rt,e("tbody",null,[l.gestionnaireSelected.id?(r(!0),i(h,{key:0},f(a.cgToAdd,s=>(r(),i("tr",{key:s.id,onClick:c=>a.addComposanteGroupe(s)},[e("td",null,[y(u(s.libelle)+" ",1),Ft])],8,zt))),128)):g("",!0)])])])])]),e("div",Bt,[Ht,e("div",Yt,[e("div",qt,[m(e("input",{class:"form-control",placeholder:"Nom du groupe",type:"text",name:"",id:"","onUpdate:modelValue":o[0]||(o[0]=s=>l.nameGroupToAdd=s)},null,512),[[v,l.nameGroupToAdd]])]),e("div",Qt,[e("button",{class:"btn btn-primary",onClick:o[1]||(o[1]=(...s)=>a.addGroup&&a.addGroup(...s))},"Ajouter")]),e("div",Jt,[m(e("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=s=>l.searchCgA=s),placeholder:"Chercher",name:"searchCgA",id:"searchCgA",class:"form-control"},null,512),[[v,l.searchCgA]])]),e("div",Xt,[m(e("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=s=>l.searchCgNonA=s),placeholder:"Chercher",name:"searchCgNonA",id:"searchCgNonA",class:"form-control"},null,512),[[v,l.searchCgNonA]])])]),e("div",Wt,[e("div",Zt,[e("table",Kt,[eo,to,e("tbody",null,[(r(!0),i(h,null,f(l.composanteGroupesDefault,s=>(r(),i("tr",{class:T({active:l.composanteGroupeSelected&&s.id===l.composanteGroupeSelected.id}),key:s.id},[e("td",{onClick:c=>a.selectComposanteGroupe(s)},u(s.libelle),9,oo),y(),e("td",{style:{width:"25px"},onClick:c=>a.deleteGroup(s)},no,8,so)],2))),128))])])]),e("div",ao,[e("table",io,[ro,e("tbody",null,[l.composanteGroupeSelected?(r(!0),i(h,{key:0},f(a.cgSelectedComposantes,s=>(r(),i("tr",{key:s.id,onClick:c=>a.removeComposante(s)},[e("td",null,[y(u(s.libelle)+" ",1),uo])],8,co))),128)):g("",!0)])])]),e("div",mo,[e("table",po,[ho,e("tbody",null,[l.composanteGroupeSelected?(r(!0),i(h,{key:0},f(a.cToAdd,s=>(r(),i("tr",{key:s.id,onClick:c=>a.addComposante(s)},[e("td",null,[y(u(s.libelle)+" ",1),fo])],8,_o))),128)):g("",!0)])])])])])])])}const vo=S(xt,[["render",bo],["__scopeId","data-v-64522761"]]),go=Object.freeze(Object.defineProperty({__proto__:null,default:vo},Symbol.toStringTag,{value:"Module"})),Co={};function yo(t,o){return null}const So=S(Co,[["render",yo]]),xo=Object.freeze(Object.defineProperty({__proto__:null,default:So},Symbol.toStringTag,{value:"Module"})),wo={name:"MonTest",props:{monId:{required:!0,type:Number}},data(){return{contacts:[],courses:[],composantes:[],mobilites:[],langues:[],loading:!1,filterSemester:"",filterComposante:"",filterText:"",filterEcts:"",filterLangue:"",pageSize:30}},async mounted(){await this.getData()},computed:{filteredCourses(){let t=0;return console.log(this.filterComposante,this.filterSemester),this.courses.filter(n=>{let d=!0;return t>=this.pageSize?!1:(this.filterComposanteRes(n)&&this.filterSemesterRes(n)&&this.filterTextRes(n)&&this.filterEctsRes(n)&&this.filterLanguesRes(n)?d=!0:d=!1,d&&t++,d)})}},methods:{toggleSemester(t){console.log(t.s1,t.s2)},filterSemesterRes(t){return this.filterSemester?this.filterSemester==="s1"&&t.s1==="1"?!0:this.filterSemester==="s2"&&t.s2==="1":!0},filterComposanteRes(t){return this.filterComposante?t.composanteId===this.filterComposante:!0},filterTextRes(t){if(this.filterText){let o=t.codeElp.indexOf(this.filterText)!==-1,n=t.libelle.indexOf(this.filterText)!==-1;return!!(o||n)}return!0},filterEctsRes(t){return this.filterEcts?parseInt(t.ects)===this.filterEcts:!0},filterLanguesRes(t){return this.filterLangue?t.langueEnseignement===this.filterLangue:!0},getData(){this.loading=!0,unicaenVue.axios.get(unicaenVue.url("formations/test-data/:monId",{monId:this.monId})).then(t=>{if(!t.data.error)console.log(t),this.courses=t.data.courses,this.composantes=t.data.composantes,this.langues=t.data.langues,this.mobilites=t.data.mobilites;else throw t.data}).catch(t=>{console.log("Error"),console.log(t)}).finally(()=>{console.log("finally"),this.loading=!1})}}},ko=e("div",{class:"row mt-2"},[e("div",{class:"col"},[e("h2",null,"Courses")])],-1),$o={class:"row mb-2"},Go={class:"col-2"},Vo=e("option",{value:"",selected:""},"Composante",-1),Ao=["value"],To={class:"col-2"},Do={class:"col-1"},Po={class:"col-2"},Lo=e("option",{value:"",selected:""},"Langues",-1),Io=["value"],Uo={class:"col-2"},No=e("option",{value:"",selected:""},"S1/S2",-1),Mo=e("option",{value:"s1"},"S1",-1),Eo=e("option",{value:"s2"},"S2",-1),Oo=[No,Mo,Eo],jo={class:"row"},Ro={class:"col"},zo=e("th",null,"Composante",-1),Fo=e("th",null,"Code",-1),Bo=e("th",null,"Title",-1),Ho=e("th",null,"ECTS",-1),Yo=e("th",null,"Langage",-1),qo=e("th",null,"S1",-1),Qo=e("th",null,"S2",-1),Jo=e("th",null,"Action",-1),Xo={class:"form-check form-switch"},Wo=["onUpdate:modelValue","onChange"],Zo={class:"form-check form-switch"},Ko=["onUpdate:modelValue","onChange"],es=e("td",null,null,-1),ts={key:0,style:{position:"absolute",top:"100px",left:"40%"},"xmlns:svg":"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.0",width:"64px",height:"64px",viewBox:"0 0 128 128","xml:space":"preserve"},os=e("g",null,[e("path",{d:"M64 9.75A54.25 54.25 0 0 0 9.75 64H0a64 64 0 0 1 128 0h-9.75A54.25 54.25 0 0 0 64 9.75z",fill:"#039dc1"}),e("animateTransform",{attributeName:"transform",type:"rotate",from:"0 64 64",to:"360 64 64",dur:"1800ms",repeatCount:"indefinite"})],-1),ss=[os];function ls(t,o,n,d,l,a){return r(),i(h,null,[ko,e("div",$o,[e("div",Go,[m(e("select",{class:"form-select",name:"searchComposante",id:"searchComposante","onUpdate:modelValue":o[0]||(o[0]=s=>l.filterComposante=s)},[Vo,(r(!0),i(h,null,f(l.composantes,s=>(r(),i("option",{value:s.id},u(s.libelle),9,Ao))),256))],512),[[w,l.filterComposante]])]),e("div",To,[m(e("input",{class:"form-control",type:"text",name:"searchText",id:"searchText","onUpdate:modelValue":o[1]||(o[1]=s=>l.filterText=s),placeholder:"Chercher Code ou Titre"},null,512),[[v,l.filterText]])]),e("div",Do,[m(e("input",{class:"form-control",type:"number",name:"searchEcts",id:"searchEcts","onUpdate:modelValue":o[2]||(o[2]=s=>l.filterEcts=s),placeholder:"ECTS"},null,512),[[v,l.filterEcts]])]),e("div",Po,[m(e("select",{class:"form-select",name:"searchLangue",id:"searchLangue","onUpdate:modelValue":o[3]||(o[3]=s=>l.filterLangue=s)},[Lo,(r(!0),i(h,null,f(l.langues,s=>(r(),i("option",{value:s},u(s),9,Io))),256))],512),[[w,l.filterLangue]])]),e("div",Uo,[m(e("select",{class:"form-select",name:"searchSemester",id:"searchSemester","onUpdate:modelValue":o[4]||(o[4]=s=>l.filterSemester=s)},Oo,512),[[w,l.filterSemester]])])]),e("div",jo,[e("div",Ro,[e("table",{class:"table table-bordered",style:R([{position:"relative"},{opacity:l.loading?"0.5":1}])},[e("thead",null,[e("tr",null,[zo,Fo,Bo,Ho,Yo,qo,Qo,(r(!0),i(h,null,f(l.mobilites,s=>(r(),i("th",null,u(s.libelle),1))),256)),Jo])]),e("tbody",null,[(r(!0),i(h,null,f(a.filteredCourses,s=>(r(),i("tr",null,[e("td",null,u(s.composanteLibelle),1),e("td",null,u(s.codeElp),1),e("td",null,u(s.libelle),1),e("td",null,u(s.ects),1),e("td",null,u(s.langueEnseignement),1),e("td",null,[e("div",Xo,[m(e("input",{class:"form-check-input checkS2",type:"checkbox",role:"switch",id:"flexSwitchCheckChecked","onUpdate:modelValue":c=>s.s1=c,"true-value":"1","false-value":"",onChange:c=>a.toggleSemester(s)},null,40,Wo),[[G,s.s1]])])]),e("td",null,[e("div",Zo,[m(e("input",{class:"form-check-input checkS2",type:"checkbox",role:"switch",id:"flexSwitchCheckChecked","onUpdate:modelValue":c=>s.s2=c,"true-value":"1","false-value":"",onChange:c=>a.toggleSemester(s)},null,40,Ko),[[G,s.s2]])])]),es]))),256))]),l.loading?(r(),i("svg",ts,ss)):g("",!0)],4),e("span",null,u(l.courses.length)+" results",1)])])],64)}const as=S(wo,[["render",ls]]),is=Object.freeze(Object.defineProperty({__proto__:null,default:as},Symbol.toStringTag,{value:"Module"})),rs=e("h3",null,"Import",-1),ds=e("h3",null,"Result",-1),cs={__name:"Index",props:{nCourses:{type:Number,required:!0},nComposantes:{type:Number,required:!0},nFormations:{type:Number,required:!0}},setup(t){const o=$([]),n=$(!1),d=$(""),l=async()=>{n.value=!0;const s=await(await fetch("/import/parseCatalogue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({urlApi:d.value})})).json();console.log(s.data),o.value=s.data,n.value=!1};return(a,s)=>(r(),i(h,null,[_(D,null,{default:b(()=>[_(P,null,{default:b(()=>[rs]),_:1}),_(L,null,{default:b(()=>[_(I,null,{default:b(()=>[_(U,null,{default:b(()=>[_(z,{label:"Url de smile-connect",modelValue:d.value,"onUpdate:modelValue":s[0]||(s[0]=c=>d.value=c)},null,8,["modelValue"])]),_:1}),_(U,null,{default:b(()=>[_(F,{color:"primary",onClick:l},{default:b(()=>[y("Import")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),_(D,null,{default:b(()=>[_(P,null,{default:b(()=>[ds]),_:1}),_(L,null,{default:b(()=>[_(I,null,{default:b(()=>[_(B,{items:o.value,"item-key":"name",loading:n.value},null,8,["items","loading"])]),_:1})]),_:1})]),_:1})],64))}},us=Object.freeze(Object.defineProperty({__proto__:null,default:cs},Symbol.toStringTag,{value:"Module"})),ms={props:{defaultNom:String,defaultPrenom:String},data(){return{form:{nom:this.defaultNom,prenom:this.defaultPrenom,mobilite:""},etablissements:[],mobilites:[],uploadedFiles:{}}},created(){this.fetchEtablissements(),this.fetchMobilites()},methods:{fetchEtablissements(){unicaenVue.axios.get("/inscription/etablissements").then(t=>{this.etablissements=t.data}).catch(t=>{console.error("Erreur lors du chargement des établissements:",t)})},fetchMobilites(){unicaenVue.axios.get("/inscription/mobilites").then(t=>{this.mobilites=t.data}).catch(t=>{console.error("Erreur lors du chargement des types de mobilité:",t)})},submitForm(){console.log("Formulaire envoyé",this.form)},handleFileUpload(t,o){this.uploadedFiles[o]=t.target.files[0]}}},ps={class:"container mt-4"},hs=e("h2",null,"Inscription",-1),_s={class:"row"},fs={class:"col-md-6 mb-3"},bs=e("label",{for:"nom",class:"form-label"},"Nom",-1),vs={class:"col-md-6 mb-3"},gs=e("label",{for:"prenom",class:"form-label"},"Prénom",-1),Cs={class:"col-md-6 mb-3"},ys=e("label",{for:"etablissement",class:"form-label"},"Établissement universitaire",-1),Ss=e("option",{disabled:"",value:""},"Veuillez sélectionner un établissement",-1),xs=["value"],ws={class:"mb-3"},ks=e("label",{class:"form-label"},"Type de mobilité",-1),$s=["id","value","onUpdate:modelValue"],Gs=["for"],Vs={key:0},As=["onChange"],Ts=e("button",{type:"submit",class:"btn btn-primary"},"S'inscrire",-1);function Ds(t,o,n,d,l,a){return r(),i("div",ps,[hs,e("form",{onSubmit:o[3]||(o[3]=H((...s)=>a.submitForm&&a.submitForm(...s),["prevent"]))},[e("div",_s,[e("div",fs,[bs,m(e("input",{type:"text",class:"form-control",id:"nom","onUpdate:modelValue":o[0]||(o[0]=s=>l.form.nom=s)},null,512),[[v,l.form.nom]])]),e("div",vs,[gs,m(e("input",{type:"text",class:"form-control",id:"prenom","onUpdate:modelValue":o[1]||(o[1]=s=>l.form.prenom=s)},null,512),[[v,l.form.prenom]])]),e("div",Cs,[ys,m(e("select",{id:"etablissement",class:"form-select","onUpdate:modelValue":o[2]||(o[2]=s=>l.form.etablissement=s)},[Ss,(r(!0),i(h,null,f(l.etablissements,s=>(r(),i("option",{key:s.id,value:s.id},u(s.libelle),9,xs))),128))],512),[[w,l.form.etablissement]])]),e("div",ws,[ks,(r(!0),i(h,null,f(l.mobilites,s=>(r(),i("div",{key:s.id,class:"form-check"},[m(e("input",{type:"radio",class:"form-check-input",id:s.id,value:s.id,"onUpdate:modelValue":c=>l.form.mobilite=c},null,8,$s),[[Y,l.form.mobilite]]),e("label",{class:"form-check-label",for:s.id},u(s.nom),9,Gs),l.form.mobilite===s.id?(r(),i("div",Vs,[e("input",{type:"file",onChange:c=>a.handleFileUpload(c,s.id)},null,40,As)])):g("",!0)]))),128))]),Ts])],32)])}const Ps=S(ms,[["render",Ds]]),Ls=Object.freeze(Object.defineProperty({__proto__:null,default:Ps},Symbol.toStringTag,{value:"Module"})),Is={name:"Documents",props:{},data(){return{}},mounted(){},methods:{}};function Us(t,o,n,d,l,a){return r(),i("div")}const Ns=S(Is,[["render",Us]]),Ms=Object.freeze(Object.defineProperty({__proto__:null,default:Ns},Symbol.toStringTag,{value:"Module"}));function Es(t){for(let o in t)for(let n in t[o])M(t[o][n],o)}function Os(){let t=document.getElementById("unicaen-vue-toast-container");return t||(t=document.createElement("div"),t.id="unicaen-vue-toast-container",t.classList.add("toast-container","position-fixed","top-0","end-0","p-3"),document.body.appendChild(t)),t}function js(t){return t=Rs(t),t=zs(t),t}function Rs(t){const o=document.createElement("div");o.innerHTML=t;const n=o.querySelector(".alert");return n?n.innerHTML:o.innerHTML}function zs(t){const o=document.createElement("div");return o.innerHTML=t,o.querySelectorAll("i.fas").forEach(d=>d.style.display="none"),o.innerHTML}function M(t,o,n=null){const d={info:"bg-info",success:"bg-success",warning:"bg-warning",error:"bg-danger"},l={info:"info-circle",success:"check-circle",warning:"exclamation-circle",error:"exclamation-triangle"},a=document.createElement("button");a.classList.add("btn-close","btn-close-white","h5"),a.style.float="right",a.setAttribute("data-bs-dismiss","toast"),a.setAttribute("aria-label","Close");const s=document.createElement("i");s.classList.add("icon","fas",`fa-${l[o]}`),s.style.float="left",s.style.fontSize="26pt",s.style.paddingLeft=".4rem",s.style.marginTop=".4rem",s.style.paddingRight="1rem";const c=document.createElement("div");c.classList.add("toast-body"),c.innerHTML=js(t);const x=document.createElement("div");x.appendChild(a),x.appendChild(s),x.appendChild(c);const C=document.createElement("div");C.classList.add("toast","text-white",d[o]?d[o]:"bg-secondary"),C.setAttribute("role","alert"),C.setAttribute("aria-live","assertive"),C.setAttribute("aria-atomic","true"),o==="error"&&t.length>500&&C.setAttribute("style","width:700px"),C.appendChild(x),Os().appendChild(C),n==null&&(n={animation:!0,delay:o==="warning"?15e3:5e3,autohide:o!=="error"}),new bootstrap.Toast(C,n).show()}const V={toast:M,toasts:Es};let k={...q};k.interceptors.request.use(t=>{if(t.submitter){let o=t.msg?t.msg:"Action en cours";t.popover!=null&&t.popover.dispose(),t.popover=new bootstrap.Popover(t.submitter,{content:`<div class="spinner-border text-primary" role="status">
  <span class="visually-hidden">Loading...</span>
</div> `+o,html:!0,trigger:"focus"}),t.popover.show()}return t});k.interceptors.response.use(t=>{if(t.messages=t.data.messages,t.data=t.data.data,t.hasErrors=!!(t.messages&&t.messages.error&&t.messages.error.length>0),t.config.popover){var o=t.config.popover;let n="";for(ns in t.messages)for(mid in t.messages[ns])n+='<div class="alert fade show alert-'+(ns=="error"?"danger":ns)+'" role="alert">'+t.messages[ns][mid]+"</div>";n?(o._config.content=n,o.setContent(),setTimeout(()=>{o.dispose()},5e3)):o.dispose()}return t.messages&&V.toasts(t.messages),t},t=>{let o=t.response.data;t.response.status==403?o="<h4>403 - Accès interdit</h4><br />Vous n'êtes pas autorisé(e) à faire cette action.":o=t.response.data,V.toast(o,"error")});k.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const Fs={uvAxios:k},A={axios:Fs.uvAxios,flashMessenger:V,url:(t,o,n)=>{let d=window.__unicaenVueBaseUrl;if(o)for(let a in o)t=t.replace(`:${a}`,o[a]);let l=n?A.encodeUrlQueryParam(n):null;return d+t+(l?`?${l}`:"")},encodeUrlQueryParam:(t,o)=>{var n=[];for(var d in t)if(t.hasOwnProperty(d)){var l=t[d],a=o?o+"["+encodeURIComponent(d)+"]":encodeURIComponent(d);if(typeof l=="object"&&l!==null)n.push(A.encodeUrlQueryParam(l,a));else{var s=encodeURIComponent(l);n.push(a+"="+s)}}return n.join("&")}};window.unicaenVue=A;function Bs(t,o){const n={};o===void 0&&(o={});for(const d in t){let a=d.slice(2,-4).replaceAll("/","");n[a]=t[d].default}for(const d of document.getElementsByClassName("vue-app")){let l=Q({template:d.innerHTML,components:n});if(o.beforeMount!==void 0&&o.beforeMount(l),o.autoloads!==void 0)for(const a in o.autoloads){let s=o.autoloads[a].replaceAll("/","");l.component(a,n[s])}l.use(J({components:!0,directives:!0})),l.mount(d),o.afterMount!==void 0&&o.afterMount(l)}}const Hs={init:Bs};N.add(X);N.add(W);const Ys=Z({components:K,directives:ee,icons:{defaultSet:"fa",aliases:te,sets:{fa:oe}},defaults:{VBtn:{color:"primary"}}}),qs=se(),Qs=Object.assign({"./Configuration/Calendar.vue":St,"./Configuration/GestionnaireComposante.vue":go,"./Configuration/User.vue":xo,"./Exemple/MonTest.vue":is,"./Import/Index.vue":us,"./Inscription/Information.vue":Ls,"./Modules/Documents.vue":Ms}),Js={beforeMount:t=>{t.component("font-awesome-icon",le),t.use(Ys),t.use(qs)}};Hs.init(Qs,Js);
